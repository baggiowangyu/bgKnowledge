# TBLive功能定义以及通信协议规范

TBLive是一款基于互联网的视音频直播系统。
视频采集端可以是基于Windows的PC机、安卓手机等终端设备。
视频播放端可以是安卓手机、苹果手机、Windows系统PC机等设备。

## 通信协议定义

根据直播系统通信协议特点，我们将通信协议框架按以下标准定义：

- 通信协议采用json封包，易于扩展维护
- 通信协议必须定义信息发送者ID和信息接收者ID

```
{
  "command" : 101,
  "from" : 000000001,
  "to" : "1000000000",
  "data" : {...}
}
```

## 功能板块划分

- 用户子系统：【协议命令范围：101-199】
  - 【所有人】用户注册
  - 【所有人】用户信息修改
  - 【所有人】关注/取消关注用户
  - 【所有人】上报用户定位

- 直播子系统：【协议命令范围：201-299】
  - 【主播】创建直播间                {"command" : 201, "from" : “000000001”}
  - 【主播/观众】查询直播间信息        {"command" : 202, "from" : “000000001”, }
  - 【主播】修改直播间信息            {"command" : 203, "from" : “000000001”, }
  - 【主播】开启收费模式              {}
  - 【主播】停止收费模式              {}
  - 【主播】开始直播                  {}
  - 【主播】停止直播                  {}
  - 【主播】设置房管
  - 【主播】撤销房管
  - 【主播/房管】禁言观众
  - 【主播/房管】踢出观众
  - 【主播/观众】退出直播间
  - 【主播/观众】查看直播间观众
  - 【观众】进入直播间
  - 【主播/房管/观众】发送聊天信息
  - 【主播/房管/观众】接收聊天信息
  - 【主播/房管/观众】查看直播间日榜
  - 【主播/房管/观众】查看直播间周榜
  - 【主播/房管/观众】查看直播间月榜
  - 【主播】查看直播间总榜
  - 【超管】封禁直播间
  - 【超管】解封直播间

- 录像系统：【协议命令范围：301-399】
  - 【主播】录制小视频
  - 【主播】上传小视频
  - 【主播/观众】点播小视频

- 礼物子系统：【协议命令范围：401-499】
  -

- 金币子系统：【协议命令范围：501-599】
  -

- 榜单子系统：【协议命令范围：601-699】
